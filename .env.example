GROBID_URL=http://localhost:8070
GROBID_INCLUDE_RAW_CITATIONS=true

# Runtime mode:
# - dev: sync uses a short rolling window (default 7 days)
# - prod: sync uses full anchor_date/window_months window from config/runtime.toml
PIPELINE_ENV=dev
# Billing mode for auto-created DynamoDB tables.
DDB_BILLING_MODE=PAY_PER_REQUEST
# Dev-only rolling sync horizon (days), ignored in prod mode.
DEV_SYNC_LOOKBACK_DAYS=7
# Optional explicit sync start-date override (YYYY-MM-DD or full ISO datetime).
# If set, this takes precedence in both dev and prod.
# SYNC_START_DATE_OVERRIDE=2026-01-01
# Optional sync end-date override (YYYY-MM-DD or full ISO datetime).
# In prod, if omitted while start override is set, end defaults to ingest.anchor_date.
# SYNC_END_DATE_OVERRIDE=2026-03-15
# Cursor safety during override runs:
# - default false: backfill does not modify sync cursor (recommended)
# - true: allow override runs to move cursor
SYNC_OVERRIDE_WRITES_CURSOR=false
# Global kill-switch for cursor writes (any mode).
SYNC_DISABLE_CURSOR_WRITE=false

# Use local DynamoDB:
DYNAMO_LOCAL_URL=http://localhost:8000

# Or use AWS DynamoDB by leaving DYNAMO_LOCAL_URL unset and providing AWS creds.
AWS_REGION=eu-north-1
AWS_SECRET_ACCESS_KEY=<AWS_SECRET_ACCESS_KEY>
AWS_ACCESS_KEY_ID=<AWS_ACCESS_KEY_ID>

DDB_TABLE_PREPRINTS=dev_preprints
DDB_TABLE_REFERENCES=dev_preprint_references
DDB_TABLE_TEI=dev_preprint_tei
DDB_TABLE_EXCLUDED_PREPRINTS=dev_excluded_preprints
DDB_TABLE_SYNCSTATE=dev_sync_state
DDB_TABLE_API_CACHE=dev_api_cache
DDB_TABLE_TRIAL_AUTHOR_NODES=dev_trial_author_nodes
DDB_TABLE_TRIAL_AUTHOR_TOKENS=dev_trial_author_tokens
DDB_TABLE_TRIAL_CLUSTERS=dev_trial_clusters
DDB_TABLE_TRIAL_ASSIGNMENTS=dev_trial_preprint_assignments
DDB_TABLE_EMAIL_SUPPRESSION=dev_email_suppression
OPENALEX_EMAIL=<PERSONAL_EMAIL_ID>
PDF_DEST_ROOT=./data/preprints

# Optional: S3 bucket for caching TEI XML files across ephemeral runs.
# If unset, TEI files are regenerated via GROBID when missing (slower).
TEI_S3_BUCKET=flora-preprint-tei-cache
LOG_LEVEL=INFO
OSF_INGEST_SKIP_EXISTING=false
API_CACHE_TTL_MONTHS=6
PIPELINE_CLAIM_LEASE_SECONDS=1800

# Email sending (Gmail SMTP with app password)
GMAIL_SENDER_ADDRESS=flora@replications.forrt.org
GMAIL_APP_PASSWORD=your-app-password-here
EMAIL_RATE_PER_MINUTE=10
EMAIL_RATE_PER_HOUR=100
EMAIL_RATE_PER_DAY=500

# Optional: receive pipeline run summaries by email (instead of Slack)
PIPELINE_NOTIFY_EMAIL=you@example.com
